<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inclusive Design Prompt IDE</title>
    <style>
        :root {
            --bg-primary: #ffffff;
            --bg-secondary: #f5f5f5;
            --bg-tertiary: #e8e8e8;
            --text-primary: #1a1a1a;
            --text-secondary: #4a4a4a;
            --border-color: #cccccc;
            --accent-primary: #0066cc;
            --accent-hover: #0052a3;
            --button-bg: #f0f0f0;
            --button-hover: #e0e0e0;
            --focus-outline: #0066cc;
            --shadow: rgba(0, 0, 0, 0.1);
        }

        [data-theme="dark"] {
            --bg-primary: #1a1a1a;
            --bg-secondary: #2a2a2a;
            --bg-tertiary: #3a3a3a;
            --text-primary: #f0f0f0;
            --text-secondary: #b0b0b0;
            --border-color: #4a4a4a;
            --accent-primary: #4d9fff;
            --accent-hover: #3385ff;
            --button-bg: #2a2a2a;
            --button-hover: #3a3a3a;
            --focus-outline: #4d9fff;
            --shadow: rgba(0, 0, 0, 0.3);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background-color: var(--bg-primary);
            color: var(--text-primary);
            height: 100vh;
            overflow: hidden;
            transition: background-color 0.3s, color 0.3s;
        }

        .container {
            display: flex;
            flex-direction: column;
            height: 100vh;
        }

        /* Header */
        header {
            background-color: var(--bg-secondary);
            border-bottom: 1px solid var(--border-color);
            padding: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        h1 {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .header-actions {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        /* Main Layout */
        .main-layout {
            display: grid;
            grid-template-columns: 250px 1fr;
            gap: 0;
            flex: 1;
            overflow: hidden;
        }

        /* Left Sidebar - Pattern Library */
        .sidebar-left {
            background-color: var(--bg-secondary);
            border-right: 1px solid var(--border-color);
            overflow-y: auto;
            padding: 1rem;
        }

        .pattern-group {
            margin-bottom: 1.5rem;
        }

        .pattern-group h2 {
            font-size: 0.875rem;
            font-weight: 600;
            text-transform: uppercase;
            color: var(--text-secondary);
            margin-bottom: 0.5rem;
            letter-spacing: 0.5px;
        }

        .pattern-buttons {
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
        }

        /* Editor Area */
        .editor-container {
            display: flex;
            flex-direction: column;
            background-color: var(--bg-primary);
            position: relative;
        }

        .editor-toolbar {
            background-color: var(--bg-secondary);
            border-bottom: 1px solid var(--border-color);
            padding: 0.5rem 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .editor-info {
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        #wireframe-editor {
            flex: 1;
            padding: 1.5rem;
            border: none;
            background-color: var(--bg-primary);
            color: var(--text-primary);
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', monospace;
            font-size: 14px;
            line-height: 1.6;
            resize: none;
            outline: none;
        }

        /* Buttons */
        button {
            padding: 0.5rem 1rem;
            border: 1px solid var(--border-color);
            background-color: var(--button-bg);
            color: var(--text-primary);
            cursor: pointer;
            border-radius: 4px;
            font-size: 0.875rem;
            font-weight: 500;
            transition: background-color 0.2s, border-color 0.2s, transform 0.1s;
            white-space: nowrap;
        }

        button:hover {
            background-color: var(--button-hover);
            border-color: var(--accent-primary);
        }

        button:active {
            transform: scale(0.98);
        }

        button:focus-visible {
            outline: 2px solid var(--focus-outline);
            outline-offset: 2px;
        }

        .btn-primary {
            background-color: var(--accent-primary);
            color: white;
            border-color: var(--accent-primary);
        }

        .btn-primary:hover {
            background-color: var(--accent-hover);
            border-color: var(--accent-hover);
        }

        .pattern-btn {
            padding: 0.4rem 0.75rem;
            text-align: left;
            font-size: 0.8125rem;
        }

        /* File Input */
        .file-input-wrapper {
            position: relative;
            overflow: hidden;
            display: inline-block;
        }

        .file-input-wrapper input[type=file] {
            position: absolute;
            left: -9999px;
        }

        /* Toast Notification */
        .toast {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            background-color: var(--accent-primary);
            color: white;
            padding: 1rem 1.5rem;
            border-radius: 4px;
            box-shadow: 0 4px 12px var(--shadow);
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.3s, transform 0.3s;
            pointer-events: none;
            z-index: 1000;
            font-weight: 500;
        }

        .toast.show {
            opacity: 1;
            transform: translateY(0);
        }

        /* Theme Toggle */
        .theme-toggle {
            background-color: var(--button-bg);
            border: 1px solid var(--border-color);
            padding: 0.5rem;
            border-radius: 4px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
        }

        .theme-toggle:hover {
            background-color: var(--button-hover);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .main-layout {
                grid-template-columns: 1fr;
            }

            .sidebar-left {
                border-right: none;
                border-bottom: 1px solid var(--border-color);
                max-height: 200px;
            }

            h1 {
                font-size: 1.25rem;
            }

            .header-actions {
                width: 100%;
            }

            .toast {
                bottom: 1rem;
                right: 1rem;
                left: 1rem;
            }
        }

        /* Scrollbar Styling */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg-secondary);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--border-color);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--text-secondary);
        }

        /* Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.7);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            padding: 1rem;
        }

        .modal-overlay.show {
            display: flex;
        }

        .modal {
            background-color: var(--bg-primary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            max-width: 700px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 8px 32px var(--shadow);
        }

        .modal-header {
            padding: 1.5rem;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-header h2 {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--text-secondary);
            padding: 0.25rem 0.5rem;
            line-height: 1;
        }

        .modal-close:hover {
            color: var(--text-primary);
            background-color: transparent;
        }

        .modal-body {
            padding: 1.5rem;
            line-height: 1.6;
        }

        .modal-body h3 {
            margin-top: 1.5rem;
            margin-bottom: 0.75rem;
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--accent-primary);
        }

        .modal-body h3:first-child {
            margin-top: 0;
        }

        .modal-body p {
            margin-bottom: 1rem;
            color: var(--text-primary);
        }

        .modal-body ul {
            margin-bottom: 1rem;
            padding-left: 1.5rem;
        }

        .modal-body li {
            margin-bottom: 0.5rem;
            color: var(--text-primary);
        }

        .modal-body strong {
            color: var(--accent-primary);
        }

        .modal-body code {
            background-color: var(--bg-tertiary);
            padding: 0.125rem 0.375rem;
            border-radius: 3px;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 0.875em;
        }

        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
            font-size: 0.9rem;
        }

        .comparison-table th,
        .comparison-table td {
            padding: 0.75rem;
            text-align: left;
            border: 1px solid var(--border-color);
        }

        .comparison-table th {
            background-color: var(--bg-secondary);
            font-weight: 600;
        }

        .help-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.25rem;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header>
            <h1>Inclusive Design Prompt IDE</h1>
            <div class="header-actions">
                <button id="help-btn" class="help-icon" title="Why text-first design?" aria-label="Learn about text-first design">
                    ?
                </button>
                <button id="copy-llm-btn" class="btn-primary" title="Copy wireframe with system context for LLM">
                    Copy for LLM
                </button>
                <button id="save-btn" title="Save wireframe to .txt file">
                    Save to .txt
                </button>
                <div class="file-input-wrapper">
                    <button title="Load wireframe from .txt file">Load from .txt</button>
                    <input type="file" id="load-btn" accept=".txt" aria-label="Load wireframe from .txt file">
                </div>
                <button id="clear-btn" title="Clear the editor">
                    Clear
                </button>
                <button id="theme-toggle" class="theme-toggle" title="Toggle dark/light mode" aria-label="Toggle dark/light mode">
                    <span id="theme-icon">ðŸŒ™</span>
                </button>
            </div>
        </header>

        <!-- Main Layout -->
        <div class="main-layout">
            <!-- Left Sidebar: Pattern Library -->
            <aside class="sidebar-left" role="complementary" aria-label="Pattern Library">
                <div class="pattern-group">
                    <h2>Metadata</h2>
                    <div class="pattern-buttons">
                        <button class="pattern-btn" data-pattern="metadata" title="Insert page metadata block">
                            Metadata Block
                        </button>
                    </div>
                </div>

                <div class="pattern-group">
                    <h2>Structure</h2>
                    <div class="pattern-buttons">
                        <button class="pattern-btn" data-pattern="h1" title="Insert heading 1">
                            Heading 1
                        </button>
                        <button class="pattern-btn" data-pattern="h2" title="Insert heading 2">
                            Heading 2
                        </button>
                        <button class="pattern-btn" data-pattern="h3" title="Insert heading 3">
                            Heading 3
                        </button>
                        <button class="pattern-btn" data-pattern="h4" title="Insert heading 4">
                            Heading 4
                        </button>
                        <button class="pattern-btn" data-pattern="h5" title="Insert heading 5">
                            Heading 5
                        </button>
                        <button class="pattern-btn" data-pattern="h6" title="Insert heading 6">
                            Heading 6
                        </button>
                        <button class="pattern-btn" data-pattern="landmark" title="Insert landmark">
                            Landmark
                        </button>
                        <button class="pattern-btn" data-pattern="bullet" title="Insert bullet list item">
                            Bullet List
                        </button>
                    </div>
                </div>

                <div class="pattern-group">
                    <h2>Interaction</h2>
                    <div class="pattern-buttons">
                        <button class="pattern-btn" data-pattern="link" title="Insert link">
                            Link
                        </button>
                        <button class="pattern-btn" data-pattern="button" title="Insert button">
                            Button
                        </button>
                        <button class="pattern-btn" data-pattern="input" title="Insert input field">
                            Input Field
                        </button>
                        <button class="pattern-btn" data-pattern="image" title="Insert image description">
                            Image

                <div class="pattern-group">
                    <h2>Layout</h2>
                    <div class="pattern-buttons">
                        <button class="pattern-btn" data-pattern="columns" title="Insert two-column layout">
                            2 Columns
                        </button>
                        <button class="pattern-btn" data-pattern="sidebar" title="Insert sidebar + main layout">
                            Sidebar Layout
                        </button>
                        <button class="pattern-btn" data-pattern="card" title="Insert content card">
                            Card/Block
                        </button>
                        <button class="pattern-btn" data-pattern="divider" title="Insert section divider">
                            Divider
                        </button>
                    </div>
                </div>
                        </button>
                    </div>
                </div>
            </aside>

            <!-- Center: Editor -->
     !-- Help Modal -->
    <div id="help-modal" class="modal-overlay" role="dialog" aria-labelledby="modal-title" aria-modal="true">
        <div class="modal">
            <div class="modal-header">
                <h2 id="modal-title">Why Text-First Design?</h2>
                <button class="modal-close" id="modal-close-btn" aria-label="Close modal">&times;</button>
            </div>
            <div class="modal-body">
                <h3>The Problem with Visual-First Wireframing</h3>
                <p>Traditional tools like <strong>Figma</strong> and <strong>Penpot</strong> prioritize visual layout before content and structure. This approach:</p>
                <ul>
                    <li><strong>Excludes screen reader users</strong> from the design process entirely</li>
                    <li>Makes accessibility an afterthought instead of a foundation</li>
                    <li>Creates barriers for non-designers to participate in early design decisions</li>
                    <li>Focuses on pixels before meaning</li>
                </ul>

                <h3>The Text-First Advantage</h3>
                <p>This tool inverts that paradigm:</p>
                <ul>
                    <li><strong>Shift-Left Accessibility:</strong> Screen reader users can participate in wireframing and co-design</li>
                    <li><strong>Semantic Structure First:</strong> Define what things ARE before how they LOOK</li>
                    <li><strong>Inclusive Collaboration:</strong> Anyone comfortable with text documents can contribute</li>
                    <li><strong>Content-First Thinking:</strong> Forces clarity about information architecture and user flows</li>
                    <li><strong>LLM-Friendly:</strong> Structured text is perfect for AI-assisted design validation and testing</li>
                </ul>

                <h3>Comparison</h3>
                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th>Aspect</th>
                            <th>Visual-First (Figma/Penpot)</th>
                            <th>Text-First (This Tool)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>First Question</strong></td>
                            <td>"Where should this go?"</td>
                            <td>"What is this?"</td>
                        </tr>
                        <tr>
                            <td><strong>Sc,
            columns: `
[Column 1 Start]
Content in left column
[Column 1 End]

[Column 2 Start]
Content in right column
[Column 2 End]

`,
            sihelpBtn = document.getElementById('help-btn');
        const helpModal = document.getElementById('help-modal');
        const modalCloseBtn = document.getElementById('modal-close-btn');
        const debar: `
[Sidebar Start]
Secondary content (navigation, filters, etc.)
[Sidebar End]

[Main Content Start]
Primary content area
[Main Content End]

`,
            card: `
[Card/Block Start]
## Card Title
Content grouped together visually
[Card/Block End]

`,
            divider: '---\n\n'reen Reader Access</strong></td>
                            <td>Cannot use wireframes</td>
                            <td>Fully accessible wireframes</td>
                        </tr>
                        <tr>
                            <td><strong>Collaboration</strong></td>
                            <td>Requires design tool knowledge</td>
                            <td>Anyone can read/edit text</td>
                        </tr>
                        <tr>
                            <td><strong>Semantic Structure</strong></td>
                            <td>Added later (if at all)</td>
                            <td>Required from the start</td>
                        </tr>
                        <tr>
                            <td><strong>LLM Testing</strong></td>
                            <td>Difficult to extract structure</td>
                            <td>Clean, parseable format</td>
            helpBtn.addEventListener('click', showHelp);
            modalCloseBtn.addEventListener('click', hideHelp);
            
            // Close modal on overlay click
            helpModal.addEventListener('click', (e) => {
                if (e.target === helpModal) {
                    hideHelp();
                }
            });
            
            // Close modal on Escape key
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && helpModal.classList.contains('show')) {
                    hideHelp();
                }
            });
                        </tr>
                    </tbody>
                </table>

                <h3>Using Layout Patterns for LLMs</h3>
                <p>The new <strong>Layout</strong> patterns help you convey visual structure in a way LLMs can understand:</p>
                <ul>
                    <li><code>[2 Columns]</code> - Indicates side-by-side content areas</li>
                    <li><code>[Sidebar]</code> - Shows primary/secondary content hierarchy</li>
                    <li><code>[Card/Block]</code> - Groups related content visually</li>
                    <li><code>---</code> - Section dividers for visual separation</li>
                </ul>
                <p>When you "Copy for LLM", these layout hints help AI understand not just <em>what</em> content exists, but <em>how</em> it's organized spatiallyâ€”making it easier to test user flows, validate information architecture, and simulate screen reader navigation.</p>

                <h3>The Workflow</h3>
                <ol>
                    <li><strong>Design in text:</strong> Build your wireframe using semantic patterns</li>
                    <li><strong>Copy for LLM:</strong> Get your design with full context included</li>
                    <li><strong>Test with AI agents:</strong> Ask LLMs to act as screen reader users, cognitive accessibility auditors, or service designers</li>
                    <li><strong>Iterate quickly:</strong> Fix issues in text before they become expensive to fix in code</li>
                </ol>

                <p><strong>Text is the most inclusive medium.</strong> By starting with text, you ensure everyoneâ€”including people with disabilitiesâ€”can participate in creating better experiences.</p>
            </div>
        </div>
    </div>

    <script>
        // Pattern library data (loaded from JSON)
        let patternsData = null;

        // System Prompt - The DSL Context
        const SYSTEM_PROMPT = `Introduction
It is important to be able to allow content designers and service designers to quickly iterate and test design ideas with a broad range of users. In doing user testing and research, it is important to be able to engage a wide range of users, including those with a wide range of visual disabilities. Text is simply the most inclusive way to share ideas to the broadest possible audience.
Accessibility is often encouraged to Shift-Left, and make sure that people with disabilities are included in the design process. There are no visual wireframe tools available today which are built to support the inclusion of screen reader users. If screen reader users cannot participate in the design process, then they cannot be engaged in co-designing to meet their needs.
This allows for a content-first approach to design. Because people are used to collaborating in documents, it also allows more people to be involved.
Legend / Patterns
GoogleDoc Heading 1 - Used here just to differentiate context from example
Default to Markdown to show structure
[](https://www.google.com/search?q=) Links - Undefined links identified with [] - only complete [example](link to /) if  page is defined.
[[]] Buttons - describe action
<> Images
# Headings


|| Landmarks
* Bullets
[__] Forms and labels

`;

        // Pattern Templates
        const PATTERNS = {
            metadata: `Title: [Page Title]
URL: /
Page language: en
Page purpose: [Purpose]
Referrer: [Source]
Regions: Header, Footer, Main
Interactive Elements: None

`,
            h1: '# Heading Text\n',
            h2: '## Sub-heading\n',
            h3: '### Heading Level 3\n',
            h4: '#### Heading Level 4\n',
            h5: '##### Heading Level 5\n',
            h6: '###### Heading Level 6\n',
            landmark: '|| Landmark Name\n',
            bullet: '* List item\n',
            link: '[Link Text](url)\n',
            button: '[[Button Label]]\n',
            input: 'Label: [________________]\n',
            image: '<Image description>\n'
        };

        // DOM Elements
        const editor = document.getElementById('wireframe-editor');
        const copyLLMBtn = document.getElementById('copy-llm-btn');
        const saveBtn = document.getElementById('save-btn');
        const loadBtn = document.getElementById('load-btn');
        const clearBtn = document.getElementById('clear-btn');
        const themeToggle = document.getElementById('theme-toggle');
        const themeIcon = document.getElementById('theme-icon');
        const toast = document.getElementById('toast');
        const charCount = document.getElementById('char-count');
        const sidebar = document.querySelector('.sidebar-left');

        // LocalStorage Key
        const STORAGE_KEY = 'inclusive-design-wireframe';
        const THEME_KEY = 'inclusive-design-theme';

        // Initialize
        async function init() {
            await loadPatterns();
            renderPatternLibrary();
            loadFromStorage();
            loadTheme();
            attachEventListeners();
            updateCharCount();
        }

        // Load patterns from JSON
        async function loadPatterns() {
            try {
                const response = await fetch('patterns.json');
                if (!response.ok) {
                    throw new Error('Failed to load patterns.json');
                }
                patternsData = await response.json();
            } catch (error) {
                console.error('Error loading patterns:', error);
                showToast('Failed to load pattern library');
                // Fallback to empty structure
                patternsData = { categories: [] };
            }
        }

        // Render pattern library from JSON
        function renderPatternLibrary() {
            if (!patternsData || !patternsData.categories) return;

            sidebar.innerHTML = '';

            patternsData.categories.forEach(category => {
                const groupDiv = document.createElement('div');
                groupDiv.className = 'pattern-group';

                const heading = document.createElement('h2');
                heading.textContent = category.name;
                groupDiv.appendChild(heading);

                const buttonsDiv = document.createElement('div');
                buttonsDiv.className = 'pattern-buttons';

                category.patterns.forEach(pattern => {
                    const button = document.createElement('button');
                    button.className = 'pattern-btn';
                    button.textContent = pattern.label;
                    button.title = pattern.description;
                    button.setAttribute('data-pattern-id', pattern.id);
                    button.setAttribute('data-syntax', pattern.syntax);
                    
                    button.addEventListener('click', () => {
                        insertPatternText(pattern.syntax);
                    });

                    buttonsDiv.appendChild(button);
                });

                groupDiv.appendChild(buttonsDiv);
                sidebar.appendChild(groupDiv);
            });
        }

        // Event Listeners
        function attachEventListeners() {
            // Editor auto-save
            editor.addEventListener('input', () => {
                saveToStorage();
                updateCharCount();
            });

            // Action buttons
            copyLLMBtn.addEventListener('click', copyForLLM);
            saveBtn.addEventListener('click', saveToFile);
            loadBtn.addEventListener('change', loadFromFile);
            clearBtn.addEventListener('click', clearEditor);
            themeToggle.addEventListener('click', toggleTheme);
            helpBtn.addEventListener('click', showHelp);
            modalCloseBtn.addEventListener('click', hideHelp);
            
            // Close modal on overlay click
            helpModal.addEventListener('click', (e) => {
                if (e.target === helpModal) {
                    hideHelp();
                }
            });
            
            // Close modal on Escape key
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && helpModal.classList.contains('show')) {
                    hideHelp();
                }
            });
        }

        // Insert pattern text at cursor position
        function insertPatternText(patternText) {
            if (!patternText) return;

            const start = editor.selectionStart;
            const end = editor.selectionEnd;
            const text = editor.value;

            editor.value = text.substring(0, start) + patternText + text.substring(end);
            
            // Move cursor to end of inserted text
            const newCursorPos = start + patternText.length;
            editor.selectionStart = newCursorPos;
            editor.selectionEnd = newCursorPos;
            editor.focus();

            saveToStorage();
            updateCharCount();
        }

        // Insert pattern text at cursor position
        function insertPatternText(patternText) {
            if (!patternText) return;

            const start = editor.selectionStart;
            const end = editor.selectionEnd;
            const text = editor.value;

            editor.value = text.substring(0, start) + patternText + text.substring(end);
            
            // Move cursor to end of inserted text
            const newCursorPos = start + patternText.length;
            editor.selectionStart = newCursorPos;
            editor.selectionEnd = newCursorPos;
            editor.focus();

            saveToStorage();
            updateCharCount();
        }

        // Copy for LLM (with System Prompt)
        async function copyForLLM() {
            const content = SYSTEM_PROMPT + '\n\n' + editor.value;
            
            try {
                await navigator.clipboard.writeText(content);
                showToast('Copied to clipboard! Ready for LLM.');
            } catch (err) {
                console.error('Failed to copy:', err);
                showToast('Failed to copy. Please try again.');
            }
        }

        // Save to .txt file
        function saveToFile() {
            const content = editor.value;
            const blob = new Blob([content], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            const timestamp = new Date().toISOString().slice(0, 10);
            
            a.href = url;
            a.download = `wireframe-${timestamp}.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showToast('File saved successfully!');
        }

        // Load from .txt file
        function loadFromFile(event) {
            const file = event.target.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = (e) => {
                editor.value = e.target.result;
                saveToStorage();
                updateCharCount();
                showToast('File loaded successfully!');
            };
            reader.readAsText(file);
            
            // Reset file input
            event.target.value = '';
        }

        // Clear editor
        function clearEditor() {
            if (editor.value.trim() === '') {
                showToast('Editor is already empty.');
                return;
            }

            if (confirm('Are you sure you want to clear the editor? This cannot be undone.')) {
                editor.value = '';
                saveToStorage();
                updateCharCount();
                editor.focus();
                showToast('Editor cleared.');
            }
        }

        // LocalStorage
        function saveToStorage() {
            try {
                localStorage.setItem(STORAGE_KEY, editor.value);
            } catch (err) {
                console.error('Failed to save to localStorage:', err);
            }
        }

        function loadFromStorage() {
            try {
                const saved = localStorage.getItem(STORAGE_KEY);
                if (saved !== null) {
                    editor.value = saved;
                }
            } catch (err) {
                console.error('Failed to load from localStorage:', err);
            }
        }

        // Theme
        function toggleTheme() {
            const currentTheme = document.documentElement.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            
            document.documentElement.setAttribute('data-theme', newTheme);
            themeIcon.textContent = newTheme === 'dark' ? 'â˜€ï¸' : 'ðŸŒ™';
            
            try {
                localStorage.setItem(THEME_KEY, newTheme);
            } catch (err) {
                console.error('Failed to save theme:', err);
            }
        }

        function loadTheme() {
            try {
                const savedTheme = localStorage.getItem(THEME_KEY);
                if (savedTheme) {
                    document.documentElement.setAttribute('data-theme', savedTheme);
                    themeIcon.textContent = savedTheme === 'dark' ? 'â˜€ï¸' : 'ðŸŒ™';
                } else {
                    // Default to light theme
                    document.documentElement.setAttribute('data-theme', 'light');
                    themeIcon.textContent = 'ðŸŒ™';
                }
            } catch (err) {
                console.error('Failed to load theme:', err);
            }
        }

        // Toast notification
        function showToast(message) {
            toast.textContent = message;
            toast.classList.add('show');
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        // Update character count
        function updateCharCount() {
            const count = editor.value.length;
            charCount.textContent = `${count.toLocaleString()} characters`;
        }

        // Show help modal
        function showHelp() {
            helpModal.classList.add('show');
            modalCloseBtn.focus();
        }

        // Hide help modal
        function hideHelp() {
            helpModal.classList.remove('show');
            helpBtn.focus();
        }

        // Initialize on load
        init();
    </script>
</body>
</html>
